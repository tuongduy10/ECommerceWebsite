@{
    Layout = "~/Views/Shared/_LayoutClientNoBanner.cshtml";
}

<div class="custom-container">
    <div class="content__wrapper products__content-wrapper">
        <div class="content__inner w-100">
            <ul class="web__directional">
                <li>
                    <a href="@Url.Action("Index", "Home")">Trang chủ</a>
                </li>
                <li>
                    <a href="@Url.Action("UserProfile", "Account")">Hồ sơ cá nhân</a>
                </li>
            </ul>
            <hr>
            <div class="user__profile-wrapper row">
                <div class="col-md-2 col-xs-12 mb-4">
                    <div class="tabs-control">
                        @await Component.InvokeAsync("UserProfileMenu")
                    </div>
                </div>

                <div class="col-md-10 col-xs-12 mb-4">
                    <div class="tabs-content">
                        <div class="tab-content">
                            <div class="text-center">
                                <div class="title"><strong>ĐĂNG KÝ BÁN HÀNG</strong></div>
                            </div>
                            @if (!Model.isRegisted)
                            {
                                <div class="user__info-form mx-auto">
                                    <div class="form-group mb-4">
                                        <label>Tên cửa hàng</label>
                                        <input type="text" class="form-control shop-name" aria-describedby="emailHelp" value="">
                                    </div>
                                    <div class="form-group mb-4">
                                        <label>Số điện thoại cửa hàng</label>
                                        <div class="d-flex align-items-center">
                                            <input type="tel" class="form-control mr-2 shop-phone" aria-describedby="emailHelp" value="">
                                        </div>
                                    </div>
                                    <div class="form-group mb-4">
                                        <label>Email cửa hàng</label>
                                        <input type="text" class="form-control shop-mail" value="">
                                    </div>
                                    <div class="form-group mb-4">
                                        <label>Thông tin ngân hàng</label>
                                        <input type="text" class="form-control mb-2 shop-bankname" value="" placeholder="Tên ngân hàng">
                                        <input type="text" class="form-control shop-bankaccount" value="" placeholder="Số tài khoản">
                                    </div>
                                    <div class="form-group">
                                        <label>Địa chỉ cửa hàng</label>
                                        <div class="d-flex flex-wrap">
                                            <input type="text" class="form-control mb-2 shop-address" value="">
                                            <div class="select-form w-100 mb-2">
                                                <select name="" id="" class="city-select form-control shop-city">
                                                    <option value="" disabled selected>Tỉnh/Thành...</option>
                                                </select>
                                                <span class="d-flex align-items-center">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                         viewBox="0 0 24 24" fill="none" stroke="#333"
                                                         stroke-width="1" stroke-linecap="round"
                                                         stroke-linejoin="round"
                                                         class="feather feather-chevron-down">
                                                        <polyline points="6 9 12 15 18 9"></polyline>
                                                    </svg>
                                                </span>
                                            </div>
                                            <div class="select-form w-100 mb-2">
                                                <select name="" id="" class="district-select form-control shop-district">
                                                    <option value="" disabled selected>Quận/Huyện...</option>
                                                </select>
                                                <span class="d-flex align-items-center">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                         viewBox="0 0 24 24" fill="none" stroke="#333"
                                                         stroke-width="1" stroke-linecap="round"
                                                         stroke-linejoin="round"
                                                         class="feather feather-chevron-down">
                                                        <polyline points="6 9 12 15 18 9"></polyline>
                                                    </svg>
                                                </span>
                                            </div>
                                            <div class="select-form w-100 mb-2">
                                                <select name="" id="" class="ward-select form-control shop-ward">
                                                    <option value="" disabled selected>Phường/Xã...</option>
                                                </select>
                                                <span class="d-flex align-items-center">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                         viewBox="0 0 24 24" fill="none" stroke="#333"
                                                         stroke-width="1" stroke-linecap="round"
                                                         stroke-linejoin="round"
                                                         class="feather feather-chevron-down">
                                                        <polyline points="6 9 12 15 18 9"></polyline>
                                                    </svg>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <button class="btn-black submit-form">Đăng ký</button>
                                    </div>
                                </div>
                            }
                            else
                            {
                                if (Model.status == 2)
                                {
                                    <div class="text-center">Yêu cầu đăng ký của bạn đang chờ được xác nhận</div>
                                }
                                if (Model.status == 4)
                                {
                                    <div class="text-center">Yêu cầu đăng ký của bạn bị từ chối</div>
                                    <div class="text-center">
                                        <a class="btn-black" href="@Url.Action("DeleteShop", "Account")">Xác nhận</a>
                                    </div>
                                }
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="~/js/main/provinces-rendering.js"></script>
@if (!string.IsNullOrEmpty(ViewBag.Message)) { 
    <script>
        alert("@ViewBag.Message");
    </script>
}
<script>
    $('.submit-form').click(function () {
        var request = {
            ShopName: $('.shop-name').val(),
            ShopPhoneNumber: $('.shop-phone').val(),
            ShopMail: $('.shop-mail').val(),
            ShopAddress: $('.shop-address').val(),
            ShopWardCode: $('.shop-ward').val(),
            ShopDistrictCode: $('.shop-district').val(),
            ShopCityCode: $('.shop-city').val(),
            ShopBankName: $('.shop-bankname').val(),
            ShopAccountNumber: $('.shop-bankaccount').val(),
        };
        $.ajax({
            url: '/api/AccountAPI/SaleRegistration',
            data: JSON.stringify(request),
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            type: 'POST',
            success: function (response) {
                alert(response)
                location.reload();
            },
            error: function (data) {
                console.log(data)
                alert(data.responseText)
            }
        });
    });
</script>